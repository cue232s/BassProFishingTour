<%= render "shared/ads_bps" %>

<div class="tabContBackground">
    <div class="tabContainer">
        <ul class="nav nav-tabs" id="myTabs">
            <li class="active">
                <a data-toggle="tab" href="#tab1">
                    <div class="tabIconContainer">
                        <%= image_tag 'iconFishTab.png', id: 'fishSolo', class: 'iconSmall', alt: 'Fish Icon' %>
                        <div class="tabText">My Tour</div>
                    </div>
                </a>
            </li>
            <li>
                <a data-toggle="tab" href="#tab2">
                    <div class="tabIconContainer">
                        <%= image_tag 'iconPerson.png', class: 'iconSmall', alt: 'Person Icon' %>
                        <div class="tabText">My Team Profile</div>
                    </div>
                </a>
            </li>
            <li id="accountOn">
                <a data-toggle="tab" href="#tab3">
                    <div class="tabIconContainer">
                        <%= image_tag 'iconSettings.png', id: 'setSolo', class: 'iconSmall', alt: 'Settings Icon Icon' %>
                        <div class="tabText">My Account</div>
                    </div>
                </a>
            </li>
        </ul>
        <div class="tabbable">
            <div class="tab-content">
                    <%= render 'tour_tab' %>
                    <%= render 'tab_team_pro' %>
                <div id="tab3" class="tab-pane">
                    <div class="teamRegContainer no">
                        <%= form_for(@profile) do |f| %>
                            <div class="teamRegContainerForm">
                                <% if @profile.errors.any? %>
                                    <div id="error_explanation">
                                        <h2><%= pluralize(@profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

                                        <ul>
                                            <% @profile.errors.full_messages.each do |msg| %>
                                                <li><%= msg %></li>
                                            <% end %>
                                        </ul>
                                    </div>
                                <% end %>

                                <div class="headText">
                                    <h3>Personal Information</h3>
                                </div>
                                <div class="divideLine"></div>
                                <div class="half">
                                    <%= f.label :first_name %>
                                    <%= f.text_field :first_name %>
                                </div>
                                <div class="half">
                                    <%= f.label :last_name %>
                                    <%= f.text_field :last_name %>
                                </div>
                                <div class="full">
                                    <%= f.label :street_address %>
                                    <%= f.text_field :street_address %>
                                </div>
                                <div class="third">
                                    <%= f.label :suite %>
                                    <%= f.text_field :suite %>
                                </div>
                                <div class="two thirds">
                                    <%= f.label :city %>
                                    <%= f.text_field :city %>
                                </div>
                                <div class="thirds">
                                    <%= f.label :state %>
                                    <%= f.text_field :state %>
                                </div>
                                <div class="two thirds">
                                    <%= f.label :zip %>
                                    <%= f.text_field :zip %>
                                </div>
                                <div class="two thirds">
                                    <%= f.label :phone %>
                                    <%= f.text_field :phone %>
                                </div>
                                <div class="third">
                                    <%= f.label :ext %>
                                    <%= f.text_field :ext %>
                                </div>
                                <div class="shirtSize">
                                    <%= f.label :shirt %>
                                    <%= f.select :shirt, [['Select Size', 1], ['XS', 2], ['S', 3], ['M', 4], ['L', 5], ['XL', 6], ['XXL', 7], ['XXXL', 8]] %>
                                </div>
                                <div class="full">
                                    <%= f.label :outdoor_rewards_number, "Outdoor Rewards Number" %>
                                    <%= f.text_field :outdoor_rewards_number %>
                                </div>
                                <div class="actions no">
                                    <%= f.submit 'Submit' %>
                                </div>
                            </div>
                        <% end %>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            $("#accountOn").on("click", function(event){
                if(($(this).attr("class")) != "active"){
                    $(".tabMidLeftCont, .tabMidRightCont").hide();
                }
            });
            $(".nav-tabs li").on("click", function(event){
                if((($(this).attr("id")) != "accountOn")){
                    $(".tabMidLeftCont, .tabMidRightCont").show();
                }
            });

            $(".nav-tabs li").on("click", function(event){
                if(($(this).attr("class")) != "accountOn"){
                    $(".adImg2, .adImg3, .adImg4").hide();
                }
            });
            $("#accountOn").on("click", function(event){
                if((($(this).attr("id")) != "active")){
                    $(".adImg2").show();
                }
            })
        </script>

        <div class="tabMiddleContainer">
            <div class="tabMidLeftCont">
   <!-- add render of partial with locals -->
                <% unless @can_register %>
                    <div class="teamEvents">
                        <div class="topDarkBrown">
                            <%= image_tag 'iconCal.png', class: 'iconSmallEvents', alt: 'Calendar icon' %>
                            <h2>My Events</h2>
                        </div>
                        <div class="topLightBrown">
                            <div class="teamListCover">
                                <h1>You Have No Events</h1>
                                <p>To register for an event, first you need to <%= link_to 'find a teammate!', requests_new_path %></p>
                            </div>
                        </div>
                        <div class="bottomBrown">

                        </div>
                    </div>
                <% else %>
                    <%= render 'my_events', :locals => { :profile => @profile } %>
                <% end %>
            </div>

            <div class="tabMidRightCont">
                <div class="leaderboard">
                    <div class="topBlue">
                        <%= image_tag 'iconGlobe.png', class: 'iconSmallEvents', alt: 'Icon' %>
                        <h2>Leaderboard</h2>
                    </div>
                    <p>Check back soon to track results from the first events of the 2013 Bass Pro Shops Fishing Tour!</p>
                </div>
                <div class="myRegion">
                    <div class="topGreen">
                        <%= image_tag 'iconMed.png', class: 'iconSmallEvents', alt: 'Icon' %>
                        <h2>My Region</h2>
                    </div>
                    <div class="bottomGreyFlat"></div>
                </div>
            </div>
        </div>

        <script type="text/javascript">

            $(function() {

                if(<%= @team.nil? %>) {
                    $('.bigPicButton').on('click', function (e) {
                      e.preventDefault();
                      alert("Get A Team Together First!");
                    });
                }
                // if the there are errors make sure MyAccounts tab is displayed
                if(<%= defined?(@showTab) != nil && @showTab %>) {
                    $('#myTabs a:last').tab('show');
                    $(".adImg2, .adImg3").show();
                    $(".tabMidLeftCont, .tabMidRightCont").hide();

                }



                //   var thisTab = e.target
                //   var pageTarget = $(thisTab).attr('href');
                //   var itemNumber = $(this).parent().index()+1;
                //   $("#tab"+itemNumber).load(pageTarget);

                // });
            });
        </script>

    </div>
</div>